<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rook Dashboard</title>
    <style>
        /* CSS Variables */
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #13131f;
            --bg-tertiary: #1e1e2e;
            --bg-elevated: #252538;
            --border-color: #2a2a3c;
            --text-primary: #e2e8f0;
            --text-secondary: #94a3b8;
            --text-muted: #64748b;
            --accent-primary: #6366f1;
            --accent-secondary: #8b5cf6;
            --status-running: #3b82f6;
            --status-idle: #64748b;
            --status-error: #ef4444;
            --status-success: #22c55e;
            --status-pending: #eab308;
            --radius-sm: 6px;
            --radius-md: 8px;
            --radius-lg: 12px;
            --font-mono: 'JetBrains Mono', 'Fira Code', monospace;
            --font-sans: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-sans);
            background: var(--bg-primary);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            font-size: 14px;
        }

        /* Layout */
        .app {
            display: grid;
            grid-template-columns: 240px 1fr;
            grid-template-rows: 48px 1fr;
            grid-template-areas:
                "sidebar header"
                "sidebar main";
            height: 100vh;
        }

        /* Header */
        .header {
            grid-area: header;
            background: var(--bg-secondary);
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 0 20px;
        }

        .header-left {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .header-title {
            font-size: 16px;
            font-weight: 600;
            color: var(--text-primary);
        }

        .connection-status {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--status-success);
        }

        .status-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: var(--status-success);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .header-right {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .header-stat {
            display: flex;
            align-items: center;
            gap: 6px;
            font-size: 12px;
            color: var(--text-secondary);
            background: var(--bg-tertiary);
            padding: 4px 10px;
            border-radius: var(--radius-md);
        }

        /* Sidebar */
        .sidebar {
            grid-area: sidebar;
            background: var(--bg-secondary);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
        }

        .logo {
            height: 48px;
            display: flex;
            align-items: center;
            padding: 0 16px;
            border-bottom: 1px solid var(--border-color);
            gap: 10px;
        }

        .logo-icon {
            width: 28px;
            height: 28px;
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 14px;
        }

        .logo-text {
            font-weight: 600;
            font-size: 15px;
        }

        .nav {
            flex: 1;
            padding: 12px 8px;
            overflow-y: auto;
        }

        .nav-section {
            margin-bottom: 20px;
        }

        .nav-section-title {
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
            color: var(--text-muted);
            padding: 0 12px 8px;
            letter-spacing: 0.5px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 8px 12px;
            border-radius: var(--radius-md);
            cursor: pointer;
            color: var(--text-secondary);
            transition: all 0.15s;
            margin-bottom: 2px;
        }

        .nav-item:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
        }

        .nav-item.active {
            background: var(--accent-primary);
            color: white;
        }

        .nav-icon {
            width: 18px;
            height: 18px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .quick-actions {
            padding: 12px 8px;
            border-top: 1px solid var(--border-color);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            padding: 8px 14px;
            border-radius: var(--radius-md);
            border: none;
            font-size: 13px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.15s;
        }

        .btn-primary {
            background: var(--accent-primary);
            color: white;
            width: 100%;
        }

        .btn-primary:hover {
            background: #5558e0;
        }

        .btn-sm {
            padding: 4px 10px;
            font-size: 12px;
        }

        /* Main Content */
        .main {
            grid-area: main;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }

        .panel {
            display: none;
            height: 100%;
            overflow: auto;
            padding: 20px;
        }

        .panel.active {
            display: block;
        }

        /* Dashboard Layout */
        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: auto 1fr;
            gap: 16px;
            height: 100%;
        }

        .dashboard-full {
            grid-column: 1 / -1;
        }

        /* Cards */
        .card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
        }

        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 14px 16px;
            border-bottom: 1px solid var(--border-color);
        }

        .card-title {
            font-size: 14px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .card-body {
            padding: 16px;
        }

        /* Context Panel */
        .context-summary {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 16px;
        }

        .context-tag {
            background: var(--bg-tertiary);
            padding: 4px 10px;
            border-radius: var(--radius-sm);
            font-size: 12px;
            color: var(--text-secondary);
            border: 1px solid var(--border-color);
        }

        .conversation-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .conversation-item {
            background: var(--bg-tertiary);
            padding: 12px;
            border-radius: var(--radius-md);
            border-left: 3px solid var(--accent-primary);
        }

        .conversation-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 6px;
            font-size: 12px;
        }

        .conversation-role {
            font-weight: 600;
            color: var(--accent-primary);
        }

        .conversation-time {
            color: var(--text-muted);
        }

        .conversation-text {
            color: var(--text-secondary);
            font-size: 13px;
            line-height: 1.5;
        }

        /* Task List */
        .task-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .task-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px;
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
        }

        .task-status {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            flex-shrink: 0;
        }

        .task-status.running { background: var(--status-running); animation: pulse 1.5s infinite; }
        .task-status.idle { background: var(--status-idle); }
        .task-status.error { background: var(--status-error); }
        .task-status.completed { background: var(--status-success); }

        .task-info {
            flex: 1;
            min-width: 0;
        }

        .task-name {
            font-weight: 500;
            margin-bottom: 2px;
        }

        .task-meta {
            font-size: 12px;
            color: var(--text-muted);
        }

        .task-progress {
            width: 60px;
            text-align: right;
        }

        .progress-bar {
            height: 4px;
            background: var(--bg-elevated);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: var(--accent-primary);
            border-radius: 2px;
            transition: width 0.3s;
        }

        /* Session Panel */
        .session-grid {
            display: grid;
            gap: 12px;
        }

        .session-card {
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            padding: 16px;
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .session-icon {
            width: 40px;
            height: 40px;
            border-radius: var(--radius-md);
            background: var(--bg-elevated);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
        }

        .session-info {
            flex: 1;
        }

        .session-name {
            font-weight: 600;
            margin-bottom: 4px;
        }

        .session-details {
            display: flex;
            gap: 12px;
            font-size: 12px;
            color: var(--text-muted);
        }

        .session-status {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 4px 10px;
            border-radius: var(--radius-sm);
            font-size: 12px;
            font-weight: 500;
        }

        .session-status.running {
            background: rgba(59, 130, 246, 0.15);
            color: var(--status-running);
        }

        .session-status.completed {
            background: rgba(34, 197, 94, 0.15);
            color: var(--status-success);
        }

        .session-status.error {
            background: rgba(239, 68, 68, 0.15);
            color: var(--status-error);
        }

        /* Memory Panel */
        .memory-toolbar {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
        }

        .search-input {
            flex: 1;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-md);
            padding: 8px 12px;
            color: var(--text-primary);
            font-size: 14px;
            outline: none;
        }

        .search-input:focus {
            border-color: var(--accent-primary);
        }

        .filter-pills {
            display: flex;
            gap: 8px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }

        .filter-pill {
            padding: 6px 12px;
            background: var(--bg-tertiary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-sm);
            font-size: 12px;
            cursor: pointer;
            transition: all 0.15s;
        }

        .filter-pill:hover, .filter-pill.active {
            background: var(--accent-primary);
            border-color: var(--accent-primary);
            color: white;
        }

        .memory-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .memory-item {
            background: var(--bg-tertiary);
            border-radius: var(--radius-md);
            padding: 14px;
            border-left: 3px solid var(--accent-secondary);
        }

        .memory-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .memory-category {
            font-size: 11px;
            text-transform: uppercase;
            font-weight: 600;
            color: var(--accent-secondary);
        }

        .memory-time {
            font-size: 12px;
            color: var(--text-muted);
        }

        .memory-content {
            color: var(--text-secondary);
            line-height: 1.5;
            font-family: var(--font-mono);
            font-size: 13px;
        }

        .memory-tags {
            display: flex;
            gap: 6px;
            margin-top: 10px;
        }

        .memory-tag {
            font-size: 11px;
            padding: 2px 8px;
            background: var(--bg-elevated);
            border-radius: var(--radius-sm);
            color: var(--text-muted);
        }

        /* Interaction Panel */
        .interaction-container {
            display: flex;
            flex-direction: column;
            height: 100%;
            max-width: 900px;
            margin: 0 auto;
            width: 100%;
        }

        .chat-history {
            flex: 1;
            overflow-y: auto;
            padding-bottom: 20px;
        }

        .chat-message {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
        }

        .chat-avatar {
            width: 32px;
            height: 32px;
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 12px;
            flex-shrink: 0;
        }

        .chat-avatar.user {
            background: var(--bg-elevated);
            color: var(--text-secondary);
        }

        .chat-avatar.rook {
            background: linear-gradient(135deg, var(--accent-primary), var(--accent-secondary));
            color: white;
        }

        .chat-content {
            flex: 1;
            line-height: 1.6;
        }

        .chat-content p {
            margin-bottom: 10px;
        }

        .chat-content pre {
            background: var(--bg-tertiary);
            padding: 12px;
            border-radius: var(--radius-md);
            overflow-x: auto;
            font-family: var(--font-mono);
            font-size: 13px;
            margin: 10px 0;
        }

        .chat-input-container {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 12px;
        }

        .chat-input {
            width: 100%;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 14px;
            resize: none;
            outline: none;
            min-height: 24px;
            max-height: 200px;
            font-family: inherit;
        }

        .chat-input::placeholder {
            color: var(--text-muted);
        }

        .chat-toolbar {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 8px;
            padding-top: 8px;
            border-top: 1px solid var(--border-color);
        }

        .chat-hint {
            font-size: 12px;
            color: var(--text-muted);
        }

        .chat-hint kbd {
            background: var(--bg-tertiary);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: var(--font-mono);
        }

        /* Command Palette Overlay */
        .command-palette {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.7);
            display: none;
            align-items: flex-start;
            justify-content: center;
            padding-top: 100px;
            z-index: 1000;
        }

        .command-palette.active {
            display: flex;
        }

        .command-palette-content {
            width: 600px;
            max-width: 90vw;
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            overflow: hidden;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5);
        }

        .command-input {
            width: 100%;
            padding: 16px;
            background: transparent;
            border: none;
            color: var(--text-primary);
            font-size: 16px;
            outline: none;
            border-bottom: 1px solid var(--border-color);
        }

        .command-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .command-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 16px;
            cursor: pointer;
            transition: background 0.15s;
        }

        .command-item:hover, .command-item.selected {
            background: var(--bg-tertiary);
        }

        .command-icon {
            width: 32px;
            height: 32px;
            background: var(--bg-elevated);
            border-radius: var(--radius-md);
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .command-info {
            flex: 1;
        }

        .command-name {
            font-weight: 500;
        }

        .command-desc {
            font-size: 12px;
            color: var(--text-muted);
        }

        .command-shortcut {
            font-size: 12px;
            color: var(--text-muted);
            font-family: var(--font-mono);
        }

        /* Stats Grid */
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 16px;
            margin-bottom: 20px;
        }

        .stat-card {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: var(--radius-lg);
            padding: 16px;
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            margin-bottom: 8px;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: var(--text-primary);
        }

        .stat-change {
            font-size: 12px;
            color: var(--status-success);
            margin-top: 4px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }

        ::-webkit-scrollbar-track {
            background: var(--bg-primary);
        }

        ::-webkit-scrollbar-thumb {
            background: var(--bg-elevated);
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: var(--text-muted);
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .app {
                grid-template-columns: 60px 1fr;
            }
            .logo-text, .nav-item span, .nav-section-title {
                display: none;
            }
            .nav-item {
                justify-content: center;
            }
            .dashboard-grid {
                grid-template-columns: 1fr;
            }
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="logo">
                <div class="logo-icon">R</div>
                <span class="logo-text">Rook</span>
            </div>
            <nav class="nav">
                <div class="nav-section">
                    <div class="nav-section-title">Views</div>
                    <div class="nav-item active" data-panel="dashboard">
                        <span class="nav-icon">üìä</span>
                        <span>Dashboard</span>
                    </div>
                    <div class="nav-item" data-panel="sessions">
                        <span class="nav-icon">‚ö°</span>
                        <span>Sessions</span>
                    </div>
                    <div class="nav-item" data-panel="memory">
                        <span class="nav-icon">üß†</span>
                        <span>Memory</span>
                    </div>
                    <div class="nav-item" data-panel="interact">
                        <span class="nav-icon">üí¨</span>
                        <span>Interact</span>
                    </div>
                </div>
                <div class="nav-section">
                    <div class="nav-section-title">System</div>
                    <div class="nav-item" data-panel="logs">
                        <span class="nav-icon">üìã</span>
                        <span>Logs</span>
                    </div>
                    <div class="nav-item" data-panel="settings">
                        <span class="nav-icon">‚öôÔ∏è</span>
                        <span>Settings</span>
                    </div>
                </div>
            </nav>
            <div class="quick-actions">
                <button class="btn btn-primary" onclick="showCommandPalette()">
                    <span>‚åò</span> Command Palette
                </button>
            </div>
        </aside>

        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <span class="header-title" id="page-title">Dashboard</span>
                <div class="connection-status">
                    <span class="status-dot"></span>
                    <span>Connected</span>
                </div>
            </div>
            <div class="header-right">
                <div class="header-stat">
                    <span>‚ö°</span>
                    <span id="active-sessions">3 Active Sessions</span>
                </div>
                <div class="header-stat">
                    <span>üß†</span>
                    <span>1,247 Memories</span>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main">
            <!-- Dashboard Panel -->
            <div class="panel active" id="panel-dashboard">
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Active Sessions</div>
                        <div class="stat-value">3</div>
                        <div class="stat-change">+1 from yesterday</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Memories Stored</div>
                        <div class="stat-value">1.2k</div>
                        <div class="stat-change">+47 today</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Tasks Completed</div>
                        <div class="stat-value">28</div>
                        <div class="stat-change">+12 this week</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Avg Response Time</div>
                        <div class="stat-value">1.4s</div>
                        <div class="stat-change">-0.2s improvement</div>
                    </div>
                </div>
                <div class="dashboard-grid">
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üéØ</span> Current Context
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="context-summary">
                                <span class="context-tag">frontend-design</span>
                                <span class="context-tag">dashboard</span>
                                <span class="context-tag">rook-interface</span>
                                <span class="context-tag">spec-driven</span>
                            </div>
                            <div style="margin-bottom: 16px;">
                                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Current Intent</div>
                                <div style="font-weight: 500;">Design a web-based frontend dashboard for Rook AI</div>
                            </div>
                            <div>
                                <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Confidence</div>
                                <div style="display: flex; align-items: center; gap: 8px;">
                                    <div class="progress-bar" style="flex: 1; height: 6px;">
                                        <div class="progress-fill" style="width: 92%;"></div>
                                    </div>
                                    <span style="font-size: 12px; font-weight: 600;">92%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-header">
                            <div class="card-title">
                                <span>‚ö°</span> Active Tasks
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="task-list">
                                <div class="task-item">
                                    <div class="task-status running"></div>
                                    <div class="task-info">
                                        <div class="task-name">Spec Writer Agent</div>
                                        <div class="task-meta">Creating dashboard specification</div>
                                    </div>
                                    <div class="task-progress">
                                        <div style="font-size: 12px; font-weight: 600; margin-bottom: 4px;">65%</div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 65%;"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="task-item">
                                    <div class="task-status running"></div>
                                    <div class="task-info">
                                        <div class="task-name">Frontend Prototype</div>
                                        <div class="task-meta">Building HTML/CSS/JS prototype</div>
                                    </div>
                                    <div class="task-progress">
                                        <div style="font-size: 12px; font-weight: 600; margin-bottom: 4px;">42%</div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 42%;"></div>
                                        </div>
                                    </div>
                                </div>
                                <div class="task-item">
                                    <div class="task-status idle"></div>
                                    <div class="task-info">
                                        <div class="task-name">Memory Indexer</div>
                                        <div class="task-meta">Waiting for new memories</div>
                                    </div>
                                    <div class="task-progress">
                                        <div style="font-size: 12px; font-weight: 600; margin-bottom: 4px;">Idle</div>
                                        <div class="progress-bar">
                                            <div class="progress-fill" style="width: 0%;"></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card dashboard-full">
                        <div class="card-header">
                            <div class="card-title">
                                <span>üí¨</span> Recent Conversation
                            </div>
                        </div>
                        <div class="card-body">
                            <div class="conversation-list">
                                <div class="conversation-item">
                                    <div class="conversation-header">
                                        <span class="conversation-role">Mikey</span>
                                        <span class="conversation-time">2 minutes ago</span>
                                    </div>
                                    <div class="conversation-text">Run Ralph Orchestrator with the spec-driven preset to design a frontend interface for Rook. The goal: Create a better way for Mikey to interact with Rook and see context.</div>
                                </div>
                                <div class="conversation-item" style="border-left-color: var(--accent-secondary);">
                                    <div class="conversation-header">
                                        <span class="conversation-role" style="color: var(--accent-secondary);">Rook</span>
                                        <span class="conversation-time">Just now</span>
                                    </div>
                                    <div class="conversation-text">I'll help you design a comprehensive dashboard for Rook. Since Ralph requires a backend CLI that isn't available, I'll proceed with the spec-driven approach directly. Creating specifications, architecture, and a working prototype...</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Sessions Panel -->
            <div class="panel" id="panel-sessions">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span>‚ö°</span> Active Sessions
                        </div>
                        <button class="btn btn-sm" style="background: var(--bg-tertiary);">Refresh</button>
                    </div>
                    <div class="card-body">
                        <div class="session-grid">
                            <div class="session-card">
                                <div class="session-icon">üìù</div>
                                <div class="session-info">
                                    <div class="session-name">Spec Writer Agent</div>
                                    <div class="session-details">
                                        <span>spec-driven.yml</span>
                                        <span>‚Ä¢</span>
                                        <span>Runtime: 12m 34s</span>
                                        <span>‚Ä¢</span>
                                        <span>Tasks: 3 open</span>
                                    </div>
                                </div>
                                <div class="session-status running">
                                    <span>‚óè</span> Running
                                </div>
                                <button class="btn btn-sm" style="background: var(--status-error); color: white;">Terminate</button>
                            </div>
                            <div class="session-card">
                                <div class="session-icon">üé®</div>
                                <div class="session-info">
                                    <div class="session-name">UI Designer Sub-agent</div>
                                    <div class="session-details">
                                        <span>frontend-workflow</span>
                                        <span>‚Ä¢</span>
                                        <span>Runtime: 8m 12s</span>
                                        <span>‚Ä¢</span>
                                        <span>Component: Dashboard</span>
                                    </div>
                                </div>
                                <div class="session-status running">
                                    <span>‚óè</span> Running
                                </div>
                                <button class="btn btn-sm" style="background: var(--status-error); color: white;">Terminate</button>
                            </div>
                            <div class="session-card">
                                <div class="session-icon">üóÑÔ∏è</div>
                                <div class="session-info">
                                    <div class="session-name">Memory Indexer</div>
                                    <div class="session-details">
                                        <span>background-service</span>
                                        <span>‚Ä¢</span>
                                        <span>Runtime: 2h 15m</span>
                                        <span>‚Ä¢</span>
                                        <span>Indexed: 47 memories</span>
                                    </div>
                                </div>
                                <div class="session-status completed">
                                    <span>‚úì</span> Completed
                                </div>
                                <button class="btn btn-sm" style="background: var(--bg-elevated);">View Logs</button>
                            </div>
                            <div class="session-card">
                                <div class="session-icon">üîç</div>
                                <div class="session-info">
                                    <div class="session-name">Code Review Agent</div>
                                    <div class="session-details">
                                        <span>review-workflow</span>
                                        <span>‚Ä¢</span>
                                        <span>Runtime: 45s</span>
                                        <span>‚Ä¢</span>
                                        <span>Error: Connection timeout</span>
                                    </div>
                                </div>
                                <div class="session-status error">
                                    <span>‚úï</span> Error
                                </div>
                                <button class="btn btn-sm" style="background: var(--bg-elevated);">Restart</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Memory Panel -->
            <div class="panel" id="panel-memory">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span>üß†</span> Memory Browser
                        </div>
                    </div>
                    <div class="card-body">
                        <div class="memory-toolbar">
                            <input type="text" class="search-input" placeholder="Search memories... (‚åòK)" id="memory-search">
                        </div>
                        <div class="filter-pills">
                            <div class="filter-pill active">All</div>
                            <div class="filter-pill">Short-term</div>
                            <div class="filter-pill">Long-term</div>
                            <div class="filter-pill">Decisions</div>
                            <div class="filter-pill">Context</div>
                        </div>
                        <div class="memory-list">
                            <div class="memory-item">
                                <div class="memory-header">
                                    <span class="memory-category">Decision</span>
                                    <span class="memory-time">2 minutes ago</span>
                                </div>
                                <div class="memory-content">Using spec-driven approach since Ralph backend unavailable. Proceeding with manual implementation of dashboard design.</div>
                                <div class="memory-tags">
                                    <span class="memory-tag">ralph</span>
                                    <span class="memory-tag">decision</span>
                                    <span class="memory-tag">dashboard</span>
                                </div>
                            </div>
                            <div class="memory-item" style="border-left-color: var(--status-success);">
                                <div class="memory-header">
                                    <span class="memory-category" style="color: var(--status-success);">Context</span>
                                    <span class="memory-time">5 minutes ago</span>
                                </div>
                                <div class="memory-content">Mikey wants: 1) Context visibility 2) Session management 3) Memory browser 4) Better interaction 5) Quick actions. Target: Developer-friendly technical UI.</div>
                                <div class="memory-tags">
                                    <span class="memory-tag">requirements</span>
                                    <span class="memory-tag">mikey</span>
                                    <span class="memory-tag">context</span>
                                </div>
                            </div>
                            <div class="memory-item" style="border-left-color: var(--status-running);">
                                <div class="memory-header">
                                    <span class="memory-category" style="color: var(--status-running);">Short-term</span>
                                    <span class="memory-time">12 minutes ago</span>
                                </div>
                                <div class="memory-content">Current workspace: /home/mobrienv/.openclaw/workspace/ralph-orchestrator. Task: Design frontend for Rook dashboard.</div>
                                <div class="memory-tags">
                                    <span class="memory-tag">workspace</span>
                                    <span class="memory-tag">task</span>
                                </div>
                            </div>
                            <div class="memory-item" style="border-left-color: #f59e0b;">
                                <div class="memory-header">
                                    <span class="memory-category" style="color: #f59e0b;">Long-term</span>
                                    <span class="memory-time">Yesterday</span>
                                </div>
                                <div class="memory-content">Rook is the Chief of Staff AI. Primary goal: Help Mikey manage tasks, memories, and workflows efficiently. Key value: Context awareness and proactive assistance.</div>
                                <div class="memory-tags">
                                    <span class="memory-tag">rook</span>
                                    <span class="memory-tag">identity</span>
                                    <span class="memory-tag">core</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Interact Panel -->
            <div class="panel" id="panel-interact">
                <div class="interaction-container">
                    <div class="chat-history">
                        <div class="chat-message">
                            <div class="chat-avatar rook">R</div>
                            <div class="chat-content">
                                <p>Hi Mikey! I'm Rook, your Chief of Staff. I can help you with:</p>
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li>Creating and tracking tasks</li>
                                    <li>Searching through your memories</li>
                                    <li>Managing active sessions</li>
                                    <li>Running complex workflows</li>
                                </ul>
                                <p>What would you like to work on?</p>
                                <p style="margin-top: 10px; padding: 10px; background: var(--bg-tertiary); border-radius: var(--radius-md);">
                                    <strong>üí° Tip:</strong> Use <kbd>/</kbd> to see available commands, or press <kbd>Cmd+K</kbd> for the command palette.
                                </p>
                            </div>
                        </div>
                        <div class="chat-message">
                            <div class="chat-avatar user">M</div>
                            <div class="chat-content">
                                <p>Create a new task to review the dashboard prototype once it's ready</p>
                            </div>
                        </div>
                        <div class="chat-message">
                            <div class="chat-avatar rook">R</div>
                            <div class="chat-content">
                                <p>‚úÖ <strong>Task created:</strong> Review dashboard prototype</p>
                                <p>I'll notify you when the prototype is complete. Would you like me to:</p>
                                <ul style="margin: 10px 0; padding-left: 20px;">
                                    <li>Set a reminder for a specific time?</li>
                                    <li>Add this to your priority queue?</li>
                                    <li>Create sub-tasks for the review?</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    <div class="chat-input-container">
                        <textarea class="chat-input" placeholder="Type a message or / for commands..." rows="1" id="chat-input"></textarea>
                        <div class="chat-toolbar">
                            <span class="chat-hint">
                                <kbd>/</kbd> for commands ¬∑ <kbd>‚åò</kbd><kbd>K</kbd> palette ¬∑ <kbd>‚Üµ</kbd> to send
                            </span>
                            <button class="btn btn-primary btn-sm">Send</button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Logs Panel -->
            <div class="panel" id="panel-logs">
                <div class="card">
                    <div class="card-header">
                        <div class="card-title">
                            <span>üìã</span> System Logs
                        </div>
                    </div>
                    <div class="card-body">
                        <div style="font-family: var(--font-mono); font-size: 13px; line-height: 1.8;">
                            <div style="color: var(--text-muted);">[17:15:36] <span style="color: var(--status-success);">INFO</span> Ralph::loop_runner ‚Äî Starting orchestration loop</div>
                            <div style="color: var(--text-muted);">[17:15:36] <span style="color: var(--status-success);">INFO</span> Memory ‚Äî Loaded 0 memories from store</div>
                            <div style="color: var(--text-muted);">[17:15:36] <span style="color: var(--status-pending);">WARN</span> PTY ‚Äî Claude backend not found in PATH</div>
                            <div style="color: var(--text-muted);">[17:15:40] <span style="color: var(--status-success);">INFO</span> Agent ‚Äî Creating spec-driven design for Rook dashboard</div>
                            <div style="color: var(--text-muted);">[17:16:12] <span style="color: var(--status-success);">INFO</span> Spec ‚Äî Written rook-dashboard.spec.md</div>
                            <div style="color: var(--text-muted);">[17:16:45] <span style="color: var(--status-success);">INFO</span> Arch ‚Äî Written rook-dashboard-architecture.md</div>
                            <div style="color: var(--text-muted);">[17:18:22] <span style="color: var(--status-running);">DEBUG</span> UI ‚Äî Building HTML/CSS/JS prototype</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Settings Panel -->
            <div class="panel" id="panel-settings">
                <div class="card" style="max-width: 600px;">
                    <div class="card-header">
                        <div class="card-title">
                            <span>‚öôÔ∏è</span> Settings
                        </div>
                    </div>
                    <div class="card-body">
                        <div style="margin-bottom: 24px;">
                            <div style="font-weight: 600; margin-bottom: 8px;">Theme</div>
                            <div style="display: flex; gap: 12px;">
                                <div class="filter-pill active">Dark</div>
                                <div class="filter-pill">Light</div>
                                <div class="filter-pill">System</div>
                            </div>
                        </div>
                        <div style="margin-bottom: 24px;">
                            <div style="font-weight: 600; margin-bottom: 8px;">Auto-refresh Interval</div>
                            <div style="display: flex; gap: 12px;">
                                <div class="filter-pill">5s</div>
                                <div class="filter-pill active">10s</div>
                                <div class="filter-pill">30s</div>
                                <div class="filter-pill">Off</div>
                            </div>
                        </div>
                        <div style="margin-bottom: 24px;">
                            <div style="font-weight: 600; margin-bottom: 8px;">Memory Retention</div>
                            <div style="color: var(--text-secondary); font-size: 13px; margin-bottom: 12px;">Automatically prune memories older than:</div>
                            <div style="display: flex; gap: 12px;">
                                <div class="filter-pill">7 days</div>
                                <div class="filter-pill active">30 days</div>
                                <div class="filter-pill">90 days</div>
                                <div class="filter-pill">Forever</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Command Palette -->
    <div class="command-palette" id="command-palette">
        <div class="command-palette-content">
            <input type="text" class="command-input" placeholder="Type a command or search..." id="command-input">
            <div class="command-list">
                <div class="command-item selected">
                    <div class="command-icon">üìù</div>
                    <div class="command-info">
                        <div class="command-name">New Task</div>
                        <div class="command-desc">Create a new task for Rook to handle</div>
                    </div>
                    <div class="command-shortcut">‚åòT</div>
                </div>
                <div class="command-item">
                    <div class="command-icon">üîç</div>
                    <div class="command-info">
                        <div class="command-name">Search Memory</div>
                        <div class="command-desc">Search through stored memories</div>
                    </div>
                    <div class="command-shortcut">‚åòK</div>
                </div>
                <div class="command-item">
                    <div class="command-icon">‚ö°</div>
                    <div class="command-info">
                        <div class="command-name">View Sessions</div>
                        <div class="command-desc">See all active sub-agents</div>
                    </div>
                    <div class="command-shortcut">‚åòS</div>
                </div>
                <div class="command-item">
                    <div class="command-icon">üìã</div>
                    <div class="command-info">
                        <div class="command-name">View Logs</div>
                        <div class="command-desc">Open system logs panel</div>
                    </div>
                </div>
                <div class="command-item">
                    <div class="command-icon">üß†</div>
                    <div class="command-info">
                        <div class="command-name">Remember</div>
                        <div class="command-desc">Save current context to memory</div>
                    </div>
                </div>
                <div class="command-item">
                    <div class="command-icon">‚ôªÔ∏è</div>
                    <div class="command-info">
                        <div class="command-name">Clear Conversation</div>
                        <div class="command-desc">Clear current chat history</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // State Management with localStorage
        // ============================================
        const Storage = {
            get(key, defaultValue = null) {
                try {
                    const item = localStorage.getItem(`rook:${key}`);
                    return item ? JSON.parse(item) : defaultValue;
                } catch (e) {
                    return defaultValue;
                }
            },
            set(key, value) {
                try {
                    localStorage.setItem(`rook:${key}`, JSON.stringify(value));
                } catch (e) {
                    console.warn('Storage failed:', e);
                }
            }
        };

        // ============================================
        // Navigation with Persistence
        // ============================================
        function switchPanel(panelId) {
            // Update active nav
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            const navItem = document.querySelector(`.nav-item[data-panel="${panelId}"]`);
            if (navItem) navItem.classList.add('active');
            
            // Update panel
            document.querySelectorAll('.panel').forEach(p => p.classList.remove('active'));
            const panel = document.getElementById(`panel-${panelId}`);
            if (panel) {
                panel.classList.add('active');
                // Add fade-in animation
                panel.style.opacity = '0';
                panel.style.transform = 'translateY(10px)';
                panel.style.transition = 'opacity 0.2s ease, transform 0.2s ease';
                requestAnimationFrame(() => {
                    panel.style.opacity = '1';
                    panel.style.transform = 'translateY(0)';
                });
            }
            
            // Update title
            document.getElementById('page-title').textContent = 
                panelId.charAt(0).toUpperCase() + panelId.slice(1);
            
            // Persist state
            Storage.set('activePanel', panelId);
        }

        document.querySelectorAll('.nav-item').forEach(item => {
            item.addEventListener('click', () => {
                switchPanel(item.dataset.panel);
            });
        });

        // Restore panel on load
        const savedPanel = Storage.get('activePanel', 'dashboard');
        switchPanel(savedPanel);

        // ============================================
        // Command Palette with Keyboard Navigation
        // ============================================
        const palette = document.getElementById('command-palette');
        const commandInput = document.getElementById('command-input');
        const commandItems = document.querySelectorAll('.command-item');
        let selectedIndex = 0;

        const commands = [
            { name: 'New Task', action: () => { switchPanel('dashboard'); showToast('New Task dialog would open'); } },
            { name: 'Search Memory', action: () => { switchPanel('memory'); document.getElementById('memory-search')?.focus(); } },
            { name: 'View Sessions', action: () => switchPanel('sessions') },
            { name: 'View Logs', action: () => switchPanel('logs') },
            { name: 'Remember', action: () => showToast('Remember dialog would open') },
            { name: 'Clear Conversation', action: () => showToast('Conversation cleared') },
        ];

        function showCommandPalette() {
            palette.classList.add('active');
            commandInput.value = '';
            commandInput.focus();
            selectedIndex = 0;
            updateSelection();
            filterCommands('');
        }

        function hideCommandPalette() {
            palette.classList.remove('active');
        }

        function updateSelection() {
            commandItems.forEach((item, index) => {
                item.classList.toggle('selected', index === selectedIndex);
            });
            // Scroll selected into view
            const selected = commandItems[selectedIndex];
            if (selected) {
                selected.scrollIntoView({ block: 'nearest', behavior: 'smooth' });
            }
        }

        function filterCommands(query) {
            const lowerQuery = query.toLowerCase();
            commandItems.forEach((item, index) => {
                const name = item.querySelector('.command-name').textContent.toLowerCase();
                const desc = item.querySelector('.command-desc').textContent.toLowerCase();
                const match = name.includes(lowerQuery) || desc.includes(lowerQuery);
                item.style.display = match ? 'flex' : 'none';
                if (match) {
                    item.dataset.visibleIndex = index;
                }
            });
            // Reset selection to first visible
            selectedIndex = 0;
            updateSelection();
        }

        function executeCommand(index) {
            const command = commands[index];
            if (command) {
                hideCommandPalette();
                command.action();
            }
        }

        // Command palette keyboard navigation
        commandInput.addEventListener('keydown', (e) => {
            const visibleItems = Array.from(commandItems).filter(item => item.style.display !== 'none');
            
            switch(e.key) {
                case 'ArrowDown':
                    e.preventDefault();
                    selectedIndex = (selectedIndex + 1) % visibleItems.length;
                    updateSelection();
                    break;
                case 'ArrowUp':
                    e.preventDefault();
                    selectedIndex = (selectedIndex - 1 + visibleItems.length) % visibleItems.length;
                    updateSelection();
                    break;
                case 'Enter':
                    e.preventDefault();
                    executeCommand(selectedIndex);
                    break;
                case 'Escape':
                    hideCommandPalette();
                    break;
            }
        });

        commandInput.addEventListener('input', (e) => {
            filterCommands(e.target.value);
        });

        // Click to execute
        commandItems.forEach((item, index) => {
            item.addEventListener('click', () => {
                selectedIndex = index;
                updateSelection();
                executeCommand(index);
            });
        });

        // Global keyboard shortcuts
        document.addEventListener('keydown', (e) => {
            // Cmd/Ctrl + K
            if ((e.metaKey || e.ctrlKey) && e.key === 'k') {
                e.preventDefault();
                showCommandPalette();
            }
            // / key (when not in input)
            if (e.key === '/' && !['INPUT', 'TEXTAREA'].includes(e.target.tagName)) {
                e.preventDefault();
                showCommandPalette();
            }
            // Escape
            if (e.key === 'Escape' && palette.classList.contains('active')) {
                hideCommandPalette();
            }
            // Cmd+T for new task
            if ((e.metaKey || e.ctrlKey) && e.key === 't') {
                e.preventDefault();
                showToast('New Task dialog would open');
            }
            // Cmd+S for sessions
            if ((e.metaKey || e.ctrlKey) && e.key === 's') {
                e.preventDefault();
                switchPanel('sessions');
            }
        });

        palette.addEventListener('click', (e) => {
            if (e.target === palette) hideCommandPalette();
        });

        // ============================================
        // Toast Notifications
        // ============================================
        function showToast(message, type = 'info') {
            const toast = document.createElement('div');
            toast.style.cssText = `
                position: fixed;
                bottom: 24px;
                right: 24px;
                background: var(--bg-secondary);
                border: 1px solid var(--border-color);
                border-left: 3px solid var(--accent-primary);
                padding: 12px 20px;
                border-radius: var(--radius-md);
                font-size: 14px;
                z-index: 9999;
                animation: slideIn 0.3s ease;
                box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            `;
            toast.textContent = message;
            document.body.appendChild(toast);
            
            setTimeout(() => {
                toast.style.animation = 'slideOut 0.3s ease';
                setTimeout(() => toast.remove(), 300);
            }, 3000);
        }

        // Add animation styles
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // ============================================
        // Chat Functionality
        // ============================================
        const chatInput = document.getElementById('chat-input');
        const chatHistory = document.querySelector('.chat-history');
        
        // Auto-resize textarea
        chatInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = Math.min(this.scrollHeight, 200) + 'px';
        });

        // Send message
        function sendMessage() {
            const text = chatInput.value.trim();
            if (!text) return;
            
            // Add user message
            const userMsg = document.createElement('div');
            userMsg.className = 'chat-message';
            userMsg.innerHTML = `
                <div class="chat-avatar user">M</div>
                <div class="chat-content"><p>${escapeHtml(text)}</p></div>
            `;
            userMsg.style.opacity = '0';
            userMsg.style.transform = 'translateY(10px)';
            userMsg.style.transition = 'opacity 0.2s, transform 0.2s';
            chatHistory.appendChild(userMsg);
            
            requestAnimationFrame(() => {
                userMsg.style.opacity = '1';
                userMsg.style.transform = 'translateY(0)';
            });
            
            // Clear input
            chatInput.value = '';
            chatInput.style.height = 'auto';
            
            // Scroll to bottom
            chatHistory.scrollTop = chatHistory.scrollHeight;
            
            // Simulate response (would be real API call)
            setTimeout(() => {
                const rookMsg = document.createElement('div');
                rookMsg.className = 'chat-message';
                rookMsg.innerHTML = `
                    <div class="chat-avatar rook">R</div>
                    <div class="chat-content">
                        <p>Got it. I'll help you with "${escapeHtml(text.substring(0, 50))}${text.length > 50 ? '...' : ''}"</p>
                    </div>
                `;
                rookMsg.style.opacity = '0';
                chatHistory.appendChild(rookMsg);
                requestAnimationFrame(() => {
                    rookMsg.style.opacity = '1';
                });
                chatHistory.scrollTop = chatHistory.scrollHeight;
            }, 800);
            
            Storage.set('chatHistory', chatHistory.innerHTML);
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Send on Enter (without shift)
        chatInput.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // Send button
        document.querySelector('.btn-primary')?.addEventListener('click', sendMessage);

        // ============================================
        // Memory Search with Highlighting
        // ============================================
        const memorySearch = document.getElementById('memory-search');
        
        memorySearch.addEventListener('input', function(e) {
            const term = e.target.value.toLowerCase().trim();
            document.querySelectorAll('.memory-item').forEach(item => {
                const content = item.querySelector('.memory-content');
                const originalText = content.textContent;
                
                if (!term) {
                    content.innerHTML = originalText;
                    item.style.display = 'block';
                    return;
                }
                
                const text = originalText.toLowerCase();
                if (text.includes(term)) {
                    item.style.display = 'block';
                    // Highlight matches
                    const regex = new RegExp(`(${escapeRegex(term)})`, 'gi');
                    content.innerHTML = originalText.replace(regex, '<mark style="background: var(--accent-primary); color: white; padding: 1px 4px; border-radius: 3px;">$1</mark>');
                } else {
                    item.style.display = 'none';
                }
            });
        });

        function escapeRegex(string) {
            return string.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
        }

        // ============================================
        // Filter Pills with Persistence
        // ============================================
        document.querySelectorAll('.filter-pill').forEach(pill => {
            pill.addEventListener('click', function() {
                const parent = this.parentElement;
                parent.querySelectorAll('.filter-pill').forEach(p => p.classList.remove('active'));
                this.classList.add('active');
                
                // Persist if in settings
                if (parent.closest('#panel-settings')) {
                    const settingName = parent.previousElementSibling?.textContent;
                    if (settingName) {
                        Storage.set(`setting:${settingName}`, this.textContent);
                    }
                }
            });
        });

        // ============================================
        // Action Buttons
        // ============================================
        document.querySelectorAll('.session-card .btn-sm').forEach(btn => {
            btn.addEventListener('click', function(e) {
                e.stopPropagation();
                const action = this.textContent.trim();
                const sessionName = this.closest('.session-card')?.querySelector('.session-name')?.textContent;
                
                if (action === 'Terminate') {
                    if (confirm(`Terminate "${sessionName}"?`)) {
                        showToast(`Terminated ${sessionName}`);
                        this.closest('.session-card').style.opacity = '0.5';
                    }
                } else if (action === 'Restart') {
                    showToast(`Restarted ${sessionName}`);
                } else if (action === 'View Logs') {
                    switchPanel('logs');
                }
            });
        });

        // Quick actions
        document.querySelector('.nav-item[title="New Task"]')?.addEventListener('click', () => {
            showToast('New Task dialog would open');
        });

        // ============================================
        // Restore State on Load
        // ============================================
        window.addEventListener('load', () => {
            // Restore chat history if any
            const savedChat = Storage.get('chatHistory');
            if (savedChat && chatHistory) {
                // Don't restore for now - static demo content is better
                // chatHistory.innerHTML = savedChat;
            }
            
            showToast('Dashboard loaded ‚Äî Cmd+K for command palette');
        });
    </script>
</body>
</html>
